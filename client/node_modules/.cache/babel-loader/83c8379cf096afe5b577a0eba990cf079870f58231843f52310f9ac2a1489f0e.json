{"ast":null,"code":"// Cache for translations to avoid repeated API calls\nconst translationCache=new Map();// Generate cache key\nfunction getCacheKey(text,from,to){return\"\".concat(from,\":\").concat(to,\":\").concat(text);}// Translate text using MyMemory free translation API\nexport async function translateText(text,from,to){// If same language or empty text, return as-is\nif(from===to||!text||!text.trim()){return text;}// Check cache first\nconst cacheKey=getCacheKey(text,from,to);if(translationCache.has(cacheKey)){return translationCache.get(cacheKey);}try{var _data$responseData;// Map language codes for the API\nconst langMap={en:'en',zh:'zh-CN'};const response=await fetch(\"https://api.mymemory.translated.net/get?q=\".concat(encodeURIComponent(text),\"&langpair=\").concat(langMap[from],\"|\").concat(langMap[to]));if(!response.ok){console.warn('Translation API error, returning original text');return text;}const data=await response.json();if(data.responseStatus===200&&(_data$responseData=data.responseData)!==null&&_data$responseData!==void 0&&_data$responseData.translatedText){const translated=data.responseData.translatedText;// Cache the result\ntranslationCache.set(cacheKey,translated);return translated;}return text;}catch(error){console.warn('Translation failed, returning original text:',error);return text;}}// Batch translate multiple texts\nexport async function translateTexts(texts,from,to){// If same language, return as-is\nif(from===to){return texts;}// Translate all texts in parallel\nconst promises=texts.map(text=>translateText(text,from,to));return Promise.all(promises);}// Clear translation cache (useful when needed)\nexport function clearTranslationCache(){translationCache.clear();}","map":{"version":3,"names":["translationCache","Map","getCacheKey","text","from","to","concat","translateText","trim","cacheKey","has","get","_data$responseData","langMap","en","zh","response","fetch","encodeURIComponent","ok","console","warn","data","json","responseStatus","responseData","translatedText","translated","set","error","translateTexts","texts","promises","map","Promise","all","clearTranslationCache","clear"],"sources":["/Users/eveyhuang/Documents/novohaven-app/client/src/services/translationService.ts"],"sourcesContent":["import { Language } from '../i18n/translations';\n\n// Cache for translations to avoid repeated API calls\nconst translationCache = new Map<string, string>();\n\n// Generate cache key\nfunction getCacheKey(text: string, from: Language, to: Language): string {\n  return `${from}:${to}:${text}`;\n}\n\n// Translate text using MyMemory free translation API\nexport async function translateText(\n  text: string,\n  from: Language,\n  to: Language\n): Promise<string> {\n  // If same language or empty text, return as-is\n  if (from === to || !text || !text.trim()) {\n    return text;\n  }\n\n  // Check cache first\n  const cacheKey = getCacheKey(text, from, to);\n  if (translationCache.has(cacheKey)) {\n    return translationCache.get(cacheKey)!;\n  }\n\n  try {\n    // Map language codes for the API\n    const langMap: Record<Language, string> = {\n      en: 'en',\n      zh: 'zh-CN',\n    };\n\n    const response = await fetch(\n      `https://api.mymemory.translated.net/get?q=${encodeURIComponent(text)}&langpair=${langMap[from]}|${langMap[to]}`\n    );\n\n    if (!response.ok) {\n      console.warn('Translation API error, returning original text');\n      return text;\n    }\n\n    const data = await response.json();\n\n    if (data.responseStatus === 200 && data.responseData?.translatedText) {\n      const translated = data.responseData.translatedText;\n      // Cache the result\n      translationCache.set(cacheKey, translated);\n      return translated;\n    }\n\n    return text;\n  } catch (error) {\n    console.warn('Translation failed, returning original text:', error);\n    return text;\n  }\n}\n\n// Batch translate multiple texts\nexport async function translateTexts(\n  texts: string[],\n  from: Language,\n  to: Language\n): Promise<string[]> {\n  // If same language, return as-is\n  if (from === to) {\n    return texts;\n  }\n\n  // Translate all texts in parallel\n  const promises = texts.map((text) => translateText(text, from, to));\n  return Promise.all(promises);\n}\n\n// Clear translation cache (useful when needed)\nexport function clearTranslationCache(): void {\n  translationCache.clear();\n}\n"],"mappings":"AAEA;AACA,KAAM,CAAAA,gBAAgB,CAAG,GAAI,CAAAC,GAAG,CAAiB,CAAC,CAElD;AACA,QAAS,CAAAC,WAAWA,CAACC,IAAY,CAAEC,IAAc,CAAEC,EAAY,CAAU,CACvE,SAAAC,MAAA,CAAUF,IAAI,MAAAE,MAAA,CAAID,EAAE,MAAAC,MAAA,CAAIH,IAAI,EAC9B,CAEA;AACA,MAAO,eAAe,CAAAI,aAAaA,CACjCJ,IAAY,CACZC,IAAc,CACdC,EAAY,CACK,CACjB;AACA,GAAID,IAAI,GAAKC,EAAE,EAAI,CAACF,IAAI,EAAI,CAACA,IAAI,CAACK,IAAI,CAAC,CAAC,CAAE,CACxC,MAAO,CAAAL,IAAI,CACb,CAEA;AACA,KAAM,CAAAM,QAAQ,CAAGP,WAAW,CAACC,IAAI,CAAEC,IAAI,CAAEC,EAAE,CAAC,CAC5C,GAAIL,gBAAgB,CAACU,GAAG,CAACD,QAAQ,CAAC,CAAE,CAClC,MAAO,CAAAT,gBAAgB,CAACW,GAAG,CAACF,QAAQ,CAAC,CACvC,CAEA,GAAI,KAAAG,kBAAA,CACF;AACA,KAAM,CAAAC,OAAiC,CAAG,CACxCC,EAAE,CAAE,IAAI,CACRC,EAAE,CAAE,OACN,CAAC,CAED,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,8CAAAX,MAAA,CACmBY,kBAAkB,CAACf,IAAI,CAAC,eAAAG,MAAA,CAAaO,OAAO,CAACT,IAAI,CAAC,MAAAE,MAAA,CAAIO,OAAO,CAACR,EAAE,CAAC,CAChH,CAAC,CAED,GAAI,CAACW,QAAQ,CAACG,EAAE,CAAE,CAChBC,OAAO,CAACC,IAAI,CAAC,gDAAgD,CAAC,CAC9D,MAAO,CAAAlB,IAAI,CACb,CAEA,KAAM,CAAAmB,IAAI,CAAG,KAAM,CAAAN,QAAQ,CAACO,IAAI,CAAC,CAAC,CAElC,GAAID,IAAI,CAACE,cAAc,GAAK,GAAG,GAAAZ,kBAAA,CAAIU,IAAI,CAACG,YAAY,UAAAb,kBAAA,WAAjBA,kBAAA,CAAmBc,cAAc,CAAE,CACpE,KAAM,CAAAC,UAAU,CAAGL,IAAI,CAACG,YAAY,CAACC,cAAc,CACnD;AACA1B,gBAAgB,CAAC4B,GAAG,CAACnB,QAAQ,CAAEkB,UAAU,CAAC,CAC1C,MAAO,CAAAA,UAAU,CACnB,CAEA,MAAO,CAAAxB,IAAI,CACb,CAAE,MAAO0B,KAAK,CAAE,CACdT,OAAO,CAACC,IAAI,CAAC,8CAA8C,CAAEQ,KAAK,CAAC,CACnE,MAAO,CAAA1B,IAAI,CACb,CACF,CAEA;AACA,MAAO,eAAe,CAAA2B,cAAcA,CAClCC,KAAe,CACf3B,IAAc,CACdC,EAAY,CACO,CACnB;AACA,GAAID,IAAI,GAAKC,EAAE,CAAE,CACf,MAAO,CAAA0B,KAAK,CACd,CAEA;AACA,KAAM,CAAAC,QAAQ,CAAGD,KAAK,CAACE,GAAG,CAAE9B,IAAI,EAAKI,aAAa,CAACJ,IAAI,CAAEC,IAAI,CAAEC,EAAE,CAAC,CAAC,CACnE,MAAO,CAAA6B,OAAO,CAACC,GAAG,CAACH,QAAQ,CAAC,CAC9B,CAEA;AACA,MAAO,SAAS,CAAAI,qBAAqBA,CAAA,CAAS,CAC5CpC,gBAAgB,CAACqC,KAAK,CAAC,CAAC,CAC1B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}