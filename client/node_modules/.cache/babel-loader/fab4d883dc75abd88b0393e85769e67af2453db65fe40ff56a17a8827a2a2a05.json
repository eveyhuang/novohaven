{"ast":null,"code":"import _objectSpread from\"/Users/eveyhuang/Documents/novohaven-app/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React from'react';import{Input,TextArea,Select}from'./Input';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";/**\n * Renders dynamic form fields based on an executor's config schema.\n * Used inline within step editors (RecipeBuilder, RecipeRunner, TemplateEditor)\n * for non-AI step types like script, http, transform, etc.\n */export function ExecutorConfigFields(_ref){let{stepType,executors,executorConfig,onConfigChange}=_ref;const executor=executors.find(e=>e.type===stepType);if(!executor){return/*#__PURE__*/_jsx(\"div\",{className:\"bg-yellow-50 border border-yellow-200 rounded-lg p-4\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-yellow-700\",children:[\"No configuration schema found for step type \\\"\",stepType,\"\\\".\"]})});}let config={};try{config=executorConfig?JSON.parse(executorConfig):{};}catch(_unused){config={};}const updateField=(name,value)=>{const updated=_objectSpread(_objectSpread({},config),{},{[name]:value});onConfigChange(JSON.stringify(updated));};return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-2xl\",children:executor.icon}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-secondary-900\",children:executor.displayName}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-secondary-500\",children:executor.description})]})]}),executor.configSchema.fields.map(field=>{var _ref2,_config$field$name;const value=(_ref2=(_config$field$name=config[field.name])!==null&&_config$field$name!==void 0?_config$field$name:field.defaultValue)!==null&&_ref2!==void 0?_ref2:'';switch(field.type){case'select':return/*#__PURE__*/_jsx(Select,{label:field.label,value:value,onChange:e=>updateField(field.name,e.target.value),options:field.options||[]},field.name);case'textarea':return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(TextArea,{label:field.label,value:value,onChange:e=>updateField(field.name,e.target.value),rows:6,className:\"font-mono text-sm\"}),field.helpText&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-secondary-500\",children:field.helpText})]},field.name);case'code':return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-secondary-700 mb-1\",children:[field.label,field.required&&/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500 ml-1\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"textarea\",{value:value,onChange:e=>updateField(field.name,e.target.value),rows:12,className:\"w-full px-3 py-2 border border-secondary-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent font-mono text-sm bg-secondary-50\",placeholder:\"Enter \".concat(field.language||'code',\" here...\")}),field.helpText&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-secondary-500\",children:field.helpText})]},field.name);case'number':return/*#__PURE__*/_jsx(Input,{label:field.label,type:\"number\",value:value,onChange:e=>updateField(field.name,parseInt(e.target.value)||0)},field.name);case'json':return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-secondary-700 mb-1\",children:field.label}),/*#__PURE__*/_jsx(\"textarea\",{value:typeof value==='string'?value:JSON.stringify(value,null,2),onChange:e=>{try{updateField(field.name,JSON.parse(e.target.value));}catch(_unused2){const updated=_objectSpread(_objectSpread({},config),{},{[field.name]:e.target.value});onConfigChange(JSON.stringify(updated));}},rows:4,className:\"w-full px-3 py-2 border border-secondary-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent font-mono text-sm\",placeholder:\"{\\\"key\\\": \\\"value\\\"}\"}),field.helpText&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-secondary-500\",children:field.helpText})]},field.name);case'boolean':return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:!!value,onChange:e=>updateField(field.name,e.target.checked),className:\"rounded border-secondary-300 text-primary-600 focus:ring-primary-500\"}),/*#__PURE__*/_jsx(\"label\",{className:\"text-sm font-medium text-secondary-700\",children:field.label})]},field.name);default:// 'text'\nreturn/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Input,{label:field.label,value:value,onChange:e=>updateField(field.name,e.target.value),placeholder:field.helpText||''}),field.helpText&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-secondary-500\",children:field.helpText})]},field.name);}})]});}","map":{"version":3,"names":["React","Input","TextArea","Select","jsxs","_jsxs","jsx","_jsx","ExecutorConfigFields","_ref","stepType","executors","executorConfig","onConfigChange","executor","find","e","type","className","children","config","JSON","parse","_unused","updateField","name","value","updated","_objectSpread","stringify","icon","displayName","description","configSchema","fields","map","field","_ref2","_config$field$name","defaultValue","label","onChange","target","options","rows","helpText","required","placeholder","concat","language","parseInt","_unused2","checked"],"sources":["/Users/eveyhuang/Documents/novohaven-app/client/src/components/common/ExecutorConfigFields.tsx"],"sourcesContent":["import React from 'react';\nimport { Input, TextArea, Select } from './Input';\nimport { ExecutorInfo } from '../../services/api';\n\n/**\n * Renders dynamic form fields based on an executor's config schema.\n * Used inline within step editors (RecipeBuilder, RecipeRunner, TemplateEditor)\n * for non-AI step types like script, http, transform, etc.\n */\nexport function ExecutorConfigFields({\n  stepType,\n  executors,\n  executorConfig,\n  onConfigChange,\n}: {\n  stepType: string;\n  executors: ExecutorInfo[];\n  executorConfig: string;\n  onConfigChange: (config: string) => void;\n}) {\n  const executor = executors.find(e => e.type === stepType);\n  if (!executor) {\n    return (\n      <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-4\">\n        <p className=\"text-sm text-yellow-700\">\n          No configuration schema found for step type \"{stepType}\".\n        </p>\n      </div>\n    );\n  }\n\n  let config: Record<string, any> = {};\n  try {\n    config = executorConfig ? JSON.parse(executorConfig) : {};\n  } catch {\n    config = {};\n  }\n\n  const updateField = (name: string, value: any) => {\n    const updated = { ...config, [name]: value };\n    onConfigChange(JSON.stringify(updated));\n  };\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"flex items-center space-x-2 mb-2\">\n        <span className=\"text-2xl\">{executor.icon}</span>\n        <div>\n          <h4 className=\"font-medium text-secondary-900\">{executor.displayName}</h4>\n          <p className=\"text-sm text-secondary-500\">{executor.description}</p>\n        </div>\n      </div>\n\n      {executor.configSchema.fields.map((field) => {\n        const value = config[field.name] ?? field.defaultValue ?? '';\n\n        switch (field.type) {\n          case 'select':\n            return (\n              <Select\n                key={field.name}\n                label={field.label}\n                value={value}\n                onChange={(e) => updateField(field.name, e.target.value)}\n                options={field.options || []}\n              />\n            );\n\n          case 'textarea':\n            return (\n              <div key={field.name}>\n                <TextArea\n                  label={field.label}\n                  value={value}\n                  onChange={(e) => updateField(field.name, e.target.value)}\n                  rows={6}\n                  className=\"font-mono text-sm\"\n                />\n                {field.helpText && (\n                  <p className=\"mt-1 text-sm text-secondary-500\">{field.helpText}</p>\n                )}\n              </div>\n            );\n\n          case 'code':\n            return (\n              <div key={field.name}>\n                <label className=\"block text-sm font-medium text-secondary-700 mb-1\">\n                  {field.label}\n                  {field.required && <span className=\"text-red-500 ml-1\">*</span>}\n                </label>\n                <textarea\n                  value={value}\n                  onChange={(e) => updateField(field.name, e.target.value)}\n                  rows={12}\n                  className=\"w-full px-3 py-2 border border-secondary-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent font-mono text-sm bg-secondary-50\"\n                  placeholder={`Enter ${field.language || 'code'} here...`}\n                />\n                {field.helpText && (\n                  <p className=\"mt-1 text-sm text-secondary-500\">{field.helpText}</p>\n                )}\n              </div>\n            );\n\n          case 'number':\n            return (\n              <Input\n                key={field.name}\n                label={field.label}\n                type=\"number\"\n                value={value}\n                onChange={(e) => updateField(field.name, parseInt(e.target.value) || 0)}\n              />\n            );\n\n          case 'json':\n            return (\n              <div key={field.name}>\n                <label className=\"block text-sm font-medium text-secondary-700 mb-1\">\n                  {field.label}\n                </label>\n                <textarea\n                  value={typeof value === 'string' ? value : JSON.stringify(value, null, 2)}\n                  onChange={(e) => {\n                    try {\n                      updateField(field.name, JSON.parse(e.target.value));\n                    } catch {\n                      const updated = { ...config, [field.name]: e.target.value };\n                      onConfigChange(JSON.stringify(updated));\n                    }\n                  }}\n                  rows={4}\n                  className=\"w-full px-3 py-2 border border-secondary-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent font-mono text-sm\"\n                  placeholder='{\"key\": \"value\"}'\n                />\n                {field.helpText && (\n                  <p className=\"mt-1 text-sm text-secondary-500\">{field.helpText}</p>\n                )}\n              </div>\n            );\n\n          case 'boolean':\n            return (\n              <div key={field.name} className=\"flex items-center space-x-3\">\n                <input\n                  type=\"checkbox\"\n                  checked={!!value}\n                  onChange={(e) => updateField(field.name, e.target.checked)}\n                  className=\"rounded border-secondary-300 text-primary-600 focus:ring-primary-500\"\n                />\n                <label className=\"text-sm font-medium text-secondary-700\">{field.label}</label>\n              </div>\n            );\n\n          default: // 'text'\n            return (\n              <div key={field.name}>\n                <Input\n                  label={field.label}\n                  value={value}\n                  onChange={(e) => updateField(field.name, e.target.value)}\n                  placeholder={field.helpText || ''}\n                />\n                {field.helpText && (\n                  <p className=\"mt-1 text-sm text-secondary-500\">{field.helpText}</p>\n                )}\n              </div>\n            );\n        }\n      })}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}