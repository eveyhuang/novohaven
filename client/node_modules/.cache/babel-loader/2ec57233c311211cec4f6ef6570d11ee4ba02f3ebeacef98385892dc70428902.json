{"ast":null,"code":"import React,{createContext,useContext,useState,useEffect}from'react';import{translations}from'../i18n/translations';import{jsx as _jsx}from\"react/jsx-runtime\";const LanguageContext=/*#__PURE__*/createContext(undefined);const STORAGE_KEY='novohaven_language';export function LanguageProvider(_ref){let{children}=_ref;const[language,setLanguageState]=useState(()=>{// Try to get saved language from localStorage\nconst saved=localStorage.getItem(STORAGE_KEY);if(saved==='en'||saved==='zh'){return saved;}// Default to browser language if Chinese, otherwise English\nconst browserLang=navigator.language.toLowerCase();return browserLang.startsWith('zh')?'zh':'en';});const setLanguage=lang=>{setLanguageState(lang);localStorage.setItem(STORAGE_KEY,lang);};const t=key=>{return translations[language][key]||translations.en[key]||key;};useEffect(()=>{// Update document lang attribute\ndocument.documentElement.lang=language;},[language]);return/*#__PURE__*/_jsx(LanguageContext.Provider,{value:{language,setLanguage,t},children:children});}export function useLanguage(){const context=useContext(LanguageContext);if(!context){throw new Error('useLanguage must be used within a LanguageProvider');}return context;}export function useTranslation(){const{t}=useLanguage();return t;}","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","translations","jsx","_jsx","LanguageContext","undefined","STORAGE_KEY","LanguageProvider","_ref","children","language","setLanguageState","saved","localStorage","getItem","browserLang","navigator","toLowerCase","startsWith","setLanguage","lang","setItem","t","key","en","document","documentElement","Provider","value","useLanguage","context","Error","useTranslation"],"sources":["/Users/eveyhuang/Documents/novohaven-app/client/src/context/LanguageContext.tsx"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect, ReactNode } from 'react';\nimport { translations, Language, TranslationKey } from '../i18n/translations';\n\ninterface LanguageContextType {\n  language: Language;\n  setLanguage: (lang: Language) => void;\n  t: (key: TranslationKey) => string;\n}\n\nconst LanguageContext = createContext<LanguageContextType | undefined>(undefined);\n\nconst STORAGE_KEY = 'novohaven_language';\n\nexport function LanguageProvider({ children }: { children: ReactNode }) {\n  const [language, setLanguageState] = useState<Language>(() => {\n    // Try to get saved language from localStorage\n    const saved = localStorage.getItem(STORAGE_KEY);\n    if (saved === 'en' || saved === 'zh') {\n      return saved;\n    }\n    // Default to browser language if Chinese, otherwise English\n    const browserLang = navigator.language.toLowerCase();\n    return browserLang.startsWith('zh') ? 'zh' : 'en';\n  });\n\n  const setLanguage = (lang: Language) => {\n    setLanguageState(lang);\n    localStorage.setItem(STORAGE_KEY, lang);\n  };\n\n  const t = (key: TranslationKey): string => {\n    return translations[language][key] || translations.en[key] || key;\n  };\n\n  useEffect(() => {\n    // Update document lang attribute\n    document.documentElement.lang = language;\n  }, [language]);\n\n  return (\n    <LanguageContext.Provider value={{ language, setLanguage, t }}>\n      {children}\n    </LanguageContext.Provider>\n  );\n}\n\nexport function useLanguage() {\n  const context = useContext(LanguageContext);\n  if (!context) {\n    throw new Error('useLanguage must be used within a LanguageProvider');\n  }\n  return context;\n}\n\nexport function useTranslation() {\n  const { t } = useLanguage();\n  return t;\n}\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,aAAa,CAAEC,UAAU,CAAEC,QAAQ,CAAEC,SAAS,KAAmB,OAAO,CACxF,OAASC,YAAY,KAAkC,sBAAsB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAQ9E,KAAM,CAAAC,eAAe,cAAGP,aAAa,CAAkCQ,SAAS,CAAC,CAEjF,KAAM,CAAAC,WAAW,CAAG,oBAAoB,CAExC,MAAO,SAAS,CAAAC,gBAAgBA,CAAAC,IAAA,CAAwC,IAAvC,CAAEC,QAAkC,CAAC,CAAAD,IAAA,CACpE,KAAM,CAACE,QAAQ,CAAEC,gBAAgB,CAAC,CAAGZ,QAAQ,CAAW,IAAM,CAC5D;AACA,KAAM,CAAAa,KAAK,CAAGC,YAAY,CAACC,OAAO,CAACR,WAAW,CAAC,CAC/C,GAAIM,KAAK,GAAK,IAAI,EAAIA,KAAK,GAAK,IAAI,CAAE,CACpC,MAAO,CAAAA,KAAK,CACd,CACA;AACA,KAAM,CAAAG,WAAW,CAAGC,SAAS,CAACN,QAAQ,CAACO,WAAW,CAAC,CAAC,CACpD,MAAO,CAAAF,WAAW,CAACG,UAAU,CAAC,IAAI,CAAC,CAAG,IAAI,CAAG,IAAI,CACnD,CAAC,CAAC,CAEF,KAAM,CAAAC,WAAW,CAAIC,IAAc,EAAK,CACtCT,gBAAgB,CAACS,IAAI,CAAC,CACtBP,YAAY,CAACQ,OAAO,CAACf,WAAW,CAAEc,IAAI,CAAC,CACzC,CAAC,CAED,KAAM,CAAAE,CAAC,CAAIC,GAAmB,EAAa,CACzC,MAAO,CAAAtB,YAAY,CAACS,QAAQ,CAAC,CAACa,GAAG,CAAC,EAAItB,YAAY,CAACuB,EAAE,CAACD,GAAG,CAAC,EAAIA,GAAG,CACnE,CAAC,CAEDvB,SAAS,CAAC,IAAM,CACd;AACAyB,QAAQ,CAACC,eAAe,CAACN,IAAI,CAAGV,QAAQ,CAC1C,CAAC,CAAE,CAACA,QAAQ,CAAC,CAAC,CAEd,mBACEP,IAAA,CAACC,eAAe,CAACuB,QAAQ,EAACC,KAAK,CAAE,CAAElB,QAAQ,CAAES,WAAW,CAAEG,CAAE,CAAE,CAAAb,QAAA,CAC3DA,QAAQ,CACe,CAAC,CAE/B,CAEA,MAAO,SAAS,CAAAoB,WAAWA,CAAA,CAAG,CAC5B,KAAM,CAAAC,OAAO,CAAGhC,UAAU,CAACM,eAAe,CAAC,CAC3C,GAAI,CAAC0B,OAAO,CAAE,CACZ,KAAM,IAAI,CAAAC,KAAK,CAAC,oDAAoD,CAAC,CACvE,CACA,MAAO,CAAAD,OAAO,CAChB,CAEA,MAAO,SAAS,CAAAE,cAAcA,CAAA,CAAG,CAC/B,KAAM,CAAEV,CAAE,CAAC,CAAGO,WAAW,CAAC,CAAC,CAC3B,MAAO,CAAAP,CAAC,CACV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}