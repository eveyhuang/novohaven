{"ast":null,"code":"import _objectSpread from\"/Users/eveyhuang/Documents/novohaven-app/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from'react';import{useParams,useNavigate}from'react-router-dom';import api from'../../services/api';import{Button,Input,TextArea,Select,Card,CardBody,CardHeader,Modal,DynamicInput,TranslatedText}from'../common';import{useLanguage}from'../../context/LanguageContext';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const DEFAULT_STEP={step_order:1,step_name:'New Step',ai_model:'mock',prompt_template:'',output_format:'text',model_config:JSON.stringify({temperature:0.7,maxTokens:2000})};export function RecipeRunner(){const{id}=useParams();const navigate=useNavigate();const{t}=useLanguage();const[recipe,setRecipe]=useState(null);const[localSteps,setLocalSteps]=useState([]);const[inputValues,setInputValues]=useState({});const[inputConfigs,setInputConfigs]=useState({});const[models,setModels]=useState([]);const[isLoading,setIsLoading]=useState(true);const[isStarting,setIsStarting]=useState(false);const[error,setError]=useState(null);const[expandedSteps,setExpandedSteps]=useState(new Set([0]));const[showVariableHelp,setShowVariableHelp]=useState(false);useEffect(()=>{loadModels();if(id){loadRecipe(parseInt(id));}},[id]);const loadModels=async()=>{try{const{all}=await api.getAIModels();setModels(all);}catch(err){console.error('Failed to load models:',err);}};const loadRecipe=async recipeId=>{setIsLoading(true);try{const data=await api.getRecipe(recipeId);setRecipe(data);setLocalSteps(data.steps||[]);// Initialize input values and configs from step input_config\nconst initialValues={};const configs={};// Collect input configs and default values from all steps\n(data.steps||[]).forEach(step=>{if(step.input_config){try{const config=JSON.parse(step.input_config);// Collect variable configurations\nif(config.variables){Object.entries(config.variables).forEach(_ref=>{let[key,varConfig]=_ref;configs[key]=varConfig;});}// Collect default values (if any)\nif(config.defaultValues){Object.entries(config.defaultValues).forEach(_ref2=>{let[key,value]=_ref2;if(value){initialValues[key]=value;}});}}catch(_unused){// Ignore parse errors\n}}});// Then ensure all required inputs have appropriate default values\n(data.required_inputs||[]).forEach(input=>{if(!(input in initialValues)){const inputConfig=configs[input];// Set appropriate default based on type\nif((inputConfig===null||inputConfig===void 0?void 0:inputConfig.type)==='url_list'){initialValues[input]=[''];}else if((inputConfig===null||inputConfig===void 0?void 0:inputConfig.type)==='image'||(inputConfig===null||inputConfig===void 0?void 0:inputConfig.type)==='file'){initialValues[input]=null;}else{initialValues[input]='';}}});setInputValues(initialValues);setInputConfigs(configs);}catch(err){setError(err.message);}finally{setIsLoading(false);}};// Extract required inputs from current step prompts and input configs\nconst extractRequiredInputs=()=>{const inputs=new Set();const variableRegex=/\\{\\{([^}]+)\\}\\}/g;const standardNames=['brand_voice','amazon_requirements','social_media_guidelines','image_style_guidelines','platform_requirements','tone_guidelines'];for(const step of localSteps){// For scraping steps, get inputs from input_config\nif(step.step_type==='scraping'&&step.input_config){try{const config=JSON.parse(step.input_config);if(config.variables){for(const variable of config.variables){if(variable.source==='user_input'&&variable.required!==false){inputs.add(variable.name);}}}}catch(_unused2){// Ignore parse errors\n}continue;}// For AI steps, get inputs from prompt_template\nlet match;const template=step.prompt_template||'';while((match=variableRegex.exec(template))!==null){const varName=match[1].trim();// Skip step outputs and company standards\nif(!varName.match(/^step_\\d+_output$/)&&!standardNames.some(s=>varName.toLowerCase().includes(s.replace(/_/g,'')))){inputs.add(varName);}}}return Array.from(inputs);};const requiredInputs=extractRequiredInputs();const updateStep=(index,updates)=>{const newSteps=[...localSteps];newSteps[index]=_objectSpread(_objectSpread({},newSteps[index]),updates);setLocalSteps(newSteps);};const addStep=()=>{const newStep=_objectSpread(_objectSpread({},DEFAULT_STEP),{},{step_order:localSteps.length+1,step_name:\"Step \".concat(localSteps.length+1)});setLocalSteps([...localSteps,newStep]);setExpandedSteps(new Set([...expandedSteps,localSteps.length]));};const removeStep=index=>{if(localSteps.length<=1){setError('Recipe must have at least one step');return;}const newSteps=localSteps.filter((_,i)=>i!==index);// Renumber steps\nnewSteps.forEach((step,i)=>{step.step_order=i+1;});setLocalSteps(newSteps);};const moveStep=(index,direction)=>{const newIndex=direction==='up'?index-1:index+1;if(newIndex<0||newIndex>=localSteps.length)return;const newSteps=[...localSteps];[newSteps[index],newSteps[newIndex]]=[newSteps[newIndex],newSteps[index]];// Renumber steps\nnewSteps.forEach((step,i)=>{step.step_order=i+1;});setLocalSteps(newSteps);};const toggleStepExpanded=index=>{const newExpanded=new Set(expandedSteps);if(newExpanded.has(index)){newExpanded.delete(index);}else{newExpanded.add(index);}setExpandedSteps(newExpanded);};const handleStartExecution=async()=>{if(!recipe)return;// Check for missing required inputs based on their type\nconst missingInputs=requiredInputs.filter(input=>{const value=inputValues[input];const config=inputConfigs[input];if(!config||config.type==='text'||config.type==='textarea'){return!value||typeof value==='string'&&!value.trim();}else if(config.type==='image'||config.type==='file'){return!value;}else if(config.type==='url_list'){return!Array.isArray(value)||value.filter(u=>u.trim()).length===0;}return!value;});if(missingInputs.length>0){setError(\"\".concat(t('fillRequiredFields'),\": \").concat(missingInputs.map(i=>{var _inputConfigs$i;return((_inputConfigs$i=inputConfigs[i])===null||_inputConfigs$i===void 0?void 0:_inputConfigs$i.label)||formatLabel(i);}).join(', ')));return;}// Prepare input data - convert complex types to strings for prompt injection\nconst processedInputs={};for(const[key,value]of Object.entries(inputValues)){const config=inputConfigs[key];if((config===null||config===void 0?void 0:config.type)==='image'&&value!==null&&value!==void 0&&value.base64){// For images, include the base64 data (will be used by vision models)\nprocessedInputs[key]=value.base64;processedInputs[\"\".concat(key,\"_description\")]=\"[Image: \".concat(value.name,\"]\");}else if((config===null||config===void 0?void 0:config.type)==='file'&&value!==null&&value!==void 0&&value.content){// For files, include the content\nprocessedInputs[key]=value.content;}else if((config===null||config===void 0?void 0:config.type)==='url_list'&&Array.isArray(value)){// For URL lists, join them\nprocessedInputs[key]=value.filter(u=>u.trim()).join('\\n');}else if(typeof value==='string'){processedInputs[key]=value;}else{processedInputs[key]=String(value||'');}}// Check that all AI steps have prompts (scraping steps don't need prompts)\nconst emptyPromptSteps=localSteps.filter(s=>s.step_type!=='scraping'&&(!s.prompt_template||!s.prompt_template.trim()));if(emptyPromptSteps.length>0){setError('All AI steps must have a prompt template');return;}setIsStarting(true);setError(null);try{// Pass modified steps to the execution with processed inputs\nconst result=await api.startExecution(recipe.id,processedInputs,localSteps);navigate(\"/executions/\".concat(result.executionId));}catch(err){setError(err.message);setIsStarting(false);}};if(isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600\"})});}if(!recipe){return/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-secondary-600\",children:t('recipeNotFound')}),/*#__PURE__*/_jsx(Button,{onClick:()=>navigate('/'),className:\"mt-4\",children:t('goToDashboard')})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-secondary-900\",children:/*#__PURE__*/_jsx(TranslatedText,{text:recipe.name})}),recipe.is_template&&/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-0.5 text-xs font-medium bg-primary-100 text-primary-700 rounded\",children:t('template')})]}),recipe.description&&/*#__PURE__*/_jsx(\"p\",{className:\"text-secondary-600 mt-1\",children:/*#__PURE__*/_jsx(TranslatedText,{text:recipe.description})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(Button,{variant:\"ghost\",onClick:()=>navigate('/'),children:t('cancel')}),/*#__PURE__*/_jsx(Button,{onClick:handleStartExecution,isLoading:isStarting,children:t('startWorkflow')})]})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-50 text-red-700 px-4 py-3 rounded-lg\",children:error}),requiredInputs.length>0&&/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsxs(CardHeader,{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"font-semibold text-secondary-900\",children:t('inputValues')}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-secondary-500 mt-1\",children:t('provideInputs')})]}),/*#__PURE__*/_jsx(CardBody,{className:\"space-y-4\",children:requiredInputs.map(input=>{const config=inputConfigs[input]||{type:'text',label:formatLabel(input),placeholder:\"Enter \".concat(formatLabel(input).toLowerCase(),\"...\")};// Ensure label defaults to formatted input name\nif(!config.label){config.label=formatLabel(input);}return/*#__PURE__*/_jsx(DynamicInput,{name:input,config:config,value:inputValues[input],onChange:value=>setInputValues(_objectSpread(_objectSpread({},inputValues),{},{[input]:value})),t:t},input);})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold text-secondary-900\",children:t('workflowSteps')}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-secondary-500\",children:t('customizePrompts')})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowVariableHelp(true),className:\"text-sm text-primary-600 hover:text-primary-700\",children:t('variableHelp')}),/*#__PURE__*/_jsx(Button,{size:\"sm\",onClick:addStep,children:t('addStep')})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:localSteps.map((step,index)=>{var _models$find;return/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"px-6 py-4 flex items-center justify-between cursor-pointer hover:bg-secondary-50\",onClick:()=>toggleStepExpanded(index),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center font-semibold \".concat(step.step_type==='scraping'?'bg-blue-100 text-blue-700':'bg-primary-100 text-primary-700'),children:step.step_type==='scraping'?'üîç':index+1}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-secondary-900\",children:/*#__PURE__*/_jsx(TranslatedText,{text:step.step_name})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-secondary-500\",children:step.step_type==='scraping'?'BrightData Scraping':((_models$find=models.find(m=>m.id===step.ai_model))===null||_models$find===void 0?void 0:_models$find.name)||step.ai_model})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();moveStep(index,'up');},disabled:index===0,className:\"p-1 text-secondary-400 hover:text-secondary-600 disabled:opacity-30\",children:/*#__PURE__*/_jsx(ChevronUpIcon,{className:\"w-4 h-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();moveStep(index,'down');},disabled:index===localSteps.length-1,className:\"p-1 text-secondary-400 hover:text-secondary-600 disabled:opacity-30\",children:/*#__PURE__*/_jsx(ChevronDownIcon,{className:\"w-4 h-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();removeStep(index);},className:\"p-1 text-red-400 hover:text-red-600\",children:/*#__PURE__*/_jsx(TrashIcon,{className:\"w-4 h-4\"})}),/*#__PURE__*/_jsx(ChevronIcon,{className:\"w-5 h-5 text-secondary-400 transition-transform \".concat(expandedSteps.has(index)?'transform rotate-180':'')})]})]}),expandedSteps.has(index)&&/*#__PURE__*/_jsxs(CardBody,{className:\"border-t border-secondary-100 space-y-4\",children:[/*#__PURE__*/_jsx(Input,{label:t('stepName'),value:step.step_name,onChange:e=>updateStep(index,{step_name:e.target.value}),placeholder:t('stepNamePlaceholder')}),step.step_type==='scraping'?/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 border border-blue-200 rounded-lg p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-2xl\",children:\"\\uD83D\\uDD0D\"}),/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-blue-800\",children:\"Scraping Step\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-blue-700\",children:\"This step extracts product reviews from e-commerce URLs using the BrightData API. You can also upload CSV files with review data.\"}),step.api_config&&(()=>{try{const apiConfig=JSON.parse(step.api_config);return/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 text-sm\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-600 font-medium\",children:\"Service:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 text-blue-800\",children:apiConfig.service}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-4 text-blue-600 font-medium\",children:\"Endpoint:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 text-blue-800\",children:apiConfig.endpoint})]});}catch(_unused3){return null;}})()]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-secondary-50 rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"text-sm font-medium text-secondary-700 mb-2\",children:\"Supported Platforms\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 bg-orange-100 text-orange-800 text-xs rounded border border-orange-200\",children:\"\\uD83D\\uDCE6 Amazon\"}),/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded border border-blue-200\",children:\"\\uD83D\\uDED2 Walmart\"}),/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded border border-purple-200\",children:\"\\uD83C\\uDFE0 Wayfair\"})]})]})]}):/*#__PURE__*//* AI Step UI */_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Select,{label:t('aiModel'),value:step.ai_model,onChange:e=>updateStep(index,{ai_model:e.target.value}),options:models.map(m=>({value:m.id,label:\"\".concat(m.name).concat(m.available?'':\" (\".concat(t('notConfigured'),\")\"))}))}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-secondary-700 mb-1\",children:t('promptTemplate')}),/*#__PURE__*/_jsx(TextArea,{value:step.prompt_template,onChange:e=>updateStep(index,{prompt_template:e.target.value}),placeholder:t('promptTemplatePlaceholder'),rows:8,className:\"font-mono text-sm\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-secondary-500\",children:t('promptTemplateHelp')})]}),/*#__PURE__*/_jsx(Select,{label:t('outputFormat'),value:step.output_format,onChange:e=>updateStep(index,{output_format:e.target.value}),options:[{value:'text',label:t('plainText')},{value:'markdown',label:t('markdown')},{value:'json',label:t('json')}]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-t border-secondary-200 pt-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-secondary-700 mb-3\",children:t('modelSettings')}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsx(Input,{label:t('temperature'),type:\"number\",min:\"0\",max:\"2\",step:\"0.1\",value:JSON.parse(step.model_config||'{}').temperature||0.7,onChange:e=>{const config=JSON.parse(step.model_config||'{}');config.temperature=parseFloat(e.target.value);updateStep(index,{model_config:JSON.stringify(config)});}}),/*#__PURE__*/_jsx(Input,{label:t('maxTokens'),type:\"number\",min:\"100\",max:\"100000\",step:\"100\",value:JSON.parse(step.model_config||'{}').maxTokens||2000,onChange:e=>{const config=JSON.parse(step.model_config||'{}');config.maxTokens=parseInt(e.target.value);updateStep(index,{model_config:JSON.stringify(config)});}})]})]})]})]})]},index);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between pt-4 border-t border-secondary-200\",children:[/*#__PURE__*/_jsx(Button,{variant:\"ghost\",onClick:()=>navigate('/'),children:t('cancel')}),/*#__PURE__*/_jsx(Button,{onClick:handleStartExecution,isLoading:isStarting,size:\"lg\",children:t('startWorkflow')})]}),/*#__PURE__*/_jsx(Modal,{isOpen:showVariableHelp,onClose:()=>setShowVariableHelp(false),title:t('variableReference'),size:\"lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-secondary-900\",children:t('userInputVariables')}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-secondary-600 mt-1\",children:[/*#__PURE__*/_jsx(\"code\",{className:\"bg-secondary-100 px-1 rounded\",children:'{{variable_name}}'}),\" \",t('userInputVariablesDesc')]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 bg-secondary-50 p-3 rounded text-sm font-mono\",children:['{{product_name}}',/*#__PURE__*/_jsx(\"br\",{}),'{{target_audience}}',/*#__PURE__*/_jsx(\"br\",{}),'{{additional_context}}']})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-secondary-900\",children:t('previousStepOutputs')}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-secondary-600 mt-1\",children:[t('previousStepOutputsDesc'),\" \",/*#__PURE__*/_jsx(\"code\",{className:\"bg-secondary-100 px-1 rounded\",children:'{{step_N_output}}'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 bg-secondary-50 p-3 rounded text-sm font-mono\",children:['{{step_1_output}}',/*#__PURE__*/_jsx(\"br\",{}),'{{step_2_output}}']})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-secondary-900\",children:t('companyStandards')}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-secondary-600 mt-1\",children:t('companyStandardsDesc')}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 bg-secondary-50 p-3 rounded text-sm font-mono\",children:['{{brand_voice}}',/*#__PURE__*/_jsx(\"br\",{}),'{{amazon_requirements}}',/*#__PURE__*/_jsx(\"br\",{}),'{{image_style_guidelines}}']})]})]})})]});}function formatLabel(varName){return varName.replace(/_/g,' ').replace(/\\b\\w/g,c=>c.toUpperCase());}// Icons\nfunction ChevronUpIcon(_ref3){let{className}=_ref3;return/*#__PURE__*/_jsx(\"svg\",{className:className,fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M5 15l7-7 7 7\"})});}function ChevronDownIcon(_ref4){let{className}=_ref4;return/*#__PURE__*/_jsx(\"svg\",{className:className,fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M19 9l-7 7-7-7\"})});}function ChevronIcon(_ref5){let{className}=_ref5;return/*#__PURE__*/_jsx(\"svg\",{className:className,fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M19 9l-7 7-7-7\"})});}function TrashIcon(_ref6){let{className}=_ref6;return/*#__PURE__*/_jsx(\"svg\",{className:className,fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"})});}","map":{"version":3,"names":["React","useEffect","useState","useParams","useNavigate","api","Button","Input","TextArea","Select","Card","CardBody","CardHeader","Modal","DynamicInput","TranslatedText","useLanguage","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","DEFAULT_STEP","step_order","step_name","ai_model","prompt_template","output_format","model_config","JSON","stringify","temperature","maxTokens","RecipeRunner","id","navigate","t","recipe","setRecipe","localSteps","setLocalSteps","inputValues","setInputValues","inputConfigs","setInputConfigs","models","setModels","isLoading","setIsLoading","isStarting","setIsStarting","error","setError","expandedSteps","setExpandedSteps","Set","showVariableHelp","setShowVariableHelp","loadModels","loadRecipe","parseInt","all","getAIModels","err","console","recipeId","data","getRecipe","steps","initialValues","configs","forEach","step","input_config","config","parse","variables","Object","entries","_ref","key","varConfig","defaultValues","_ref2","value","_unused","required_inputs","input","inputConfig","type","message","extractRequiredInputs","inputs","variableRegex","standardNames","step_type","variable","source","required","add","name","_unused2","match","template","exec","varName","trim","some","s","toLowerCase","includes","replace","Array","from","requiredInputs","updateStep","index","updates","newSteps","_objectSpread","addStep","newStep","length","concat","removeStep","filter","_","i","moveStep","direction","newIndex","toggleStepExpanded","newExpanded","has","delete","handleStartExecution","missingInputs","isArray","u","map","_inputConfigs$i","label","formatLabel","join","processedInputs","base64","content","String","emptyPromptSteps","result","startExecution","executionId","className","children","onClick","text","is_template","description","variant","placeholder","onChange","size","_models$find","find","m","e","stopPropagation","disabled","ChevronUpIcon","ChevronDownIcon","TrashIcon","ChevronIcon","target","api_config","apiConfig","service","endpoint","_unused3","options","available","rows","min","max","parseFloat","isOpen","onClose","title","c","toUpperCase","_ref3","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","_ref4","_ref5","_ref6"],"sources":["/Users/eveyhuang/Documents/novohaven-app/client/src/components/RecipeBuilder/RecipeRunner.tsx"],"sourcesContent":["import React, { useEffect, useState, useMemo } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { Recipe, RecipeStep, AIModel, InputTypeConfig, TemplateInputConfig } from '../../types';\nimport api from '../../services/api';\nimport { Button, Input, TextArea, Select, Card, CardBody, CardHeader, Modal, DynamicInput, TranslatedText } from '../common';\nimport { useLanguage } from '../../context/LanguageContext';\n\nconst DEFAULT_STEP: Omit<RecipeStep, 'id' | 'recipe_id' | 'created_at'> = {\n  step_order: 1,\n  step_name: 'New Step',\n  ai_model: 'mock',\n  prompt_template: '',\n  output_format: 'text',\n  model_config: JSON.stringify({ temperature: 0.7, maxTokens: 2000 }),\n};\n\nexport function RecipeRunner() {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const { t } = useLanguage();\n\n  const [recipe, setRecipe] = useState<Recipe | null>(null);\n  const [localSteps, setLocalSteps] = useState<RecipeStep[]>([]);\n  const [inputValues, setInputValues] = useState<Record<string, any>>({});\n  const [inputConfigs, setInputConfigs] = useState<Record<string, InputTypeConfig>>({});\n  const [models, setModels] = useState<AIModel[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isStarting, setIsStarting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [expandedSteps, setExpandedSteps] = useState<Set<number>>(new Set([0]));\n  const [showVariableHelp, setShowVariableHelp] = useState(false);\n\n  useEffect(() => {\n    loadModels();\n    if (id) {\n      loadRecipe(parseInt(id));\n    }\n  }, [id]);\n\n  const loadModels = async () => {\n    try {\n      const { all } = await api.getAIModels();\n      setModels(all);\n    } catch (err: any) {\n      console.error('Failed to load models:', err);\n    }\n  };\n\n  const loadRecipe = async (recipeId: number) => {\n    setIsLoading(true);\n    try {\n      const data = await api.getRecipe(recipeId);\n      setRecipe(data);\n      setLocalSteps(data.steps || []);\n\n      // Initialize input values and configs from step input_config\n      const initialValues: Record<string, any> = {};\n      const configs: Record<string, InputTypeConfig> = {};\n\n      // Collect input configs and default values from all steps\n      (data.steps || []).forEach((step) => {\n        if (step.input_config) {\n          try {\n            const config: TemplateInputConfig = JSON.parse(step.input_config);\n            // Collect variable configurations\n            if (config.variables) {\n              Object.entries(config.variables).forEach(([key, varConfig]) => {\n                configs[key] = varConfig;\n              });\n            }\n            // Collect default values (if any)\n            if ((config as any).defaultValues) {\n              Object.entries((config as any).defaultValues).forEach(([key, value]) => {\n                if (value) {\n                  initialValues[key] = value;\n                }\n              });\n            }\n          } catch {\n            // Ignore parse errors\n          }\n        }\n      });\n\n      // Then ensure all required inputs have appropriate default values\n      (data.required_inputs || []).forEach((input) => {\n        if (!(input in initialValues)) {\n          const inputConfig = configs[input];\n          // Set appropriate default based on type\n          if (inputConfig?.type === 'url_list') {\n            initialValues[input] = [''];\n          } else if (inputConfig?.type === 'image' || inputConfig?.type === 'file') {\n            initialValues[input] = null;\n          } else {\n            initialValues[input] = '';\n          }\n        }\n      });\n\n      setInputValues(initialValues);\n      setInputConfigs(configs);\n    } catch (err: any) {\n      setError(err.message);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Extract required inputs from current step prompts and input configs\n  const extractRequiredInputs = (): string[] => {\n    const inputs = new Set<string>();\n    const variableRegex = /\\{\\{([^}]+)\\}\\}/g;\n\n    const standardNames = [\n      'brand_voice', 'amazon_requirements', 'social_media_guidelines',\n      'image_style_guidelines', 'platform_requirements', 'tone_guidelines',\n    ];\n\n    for (const step of localSteps) {\n      // For scraping steps, get inputs from input_config\n      if (step.step_type === 'scraping' && step.input_config) {\n        try {\n          const config = JSON.parse(step.input_config);\n          if (config.variables) {\n            for (const variable of config.variables) {\n              if (variable.source === 'user_input' && variable.required !== false) {\n                inputs.add(variable.name);\n              }\n            }\n          }\n        } catch {\n          // Ignore parse errors\n        }\n        continue;\n      }\n\n      // For AI steps, get inputs from prompt_template\n      let match;\n      const template = step.prompt_template || '';\n      while ((match = variableRegex.exec(template)) !== null) {\n        const varName = match[1].trim();\n        // Skip step outputs and company standards\n        if (!varName.match(/^step_\\d+_output$/) &&\n            !standardNames.some(s => varName.toLowerCase().includes(s.replace(/_/g, '')))) {\n          inputs.add(varName);\n        }\n      }\n    }\n    return Array.from(inputs);\n  };\n\n  const requiredInputs = extractRequiredInputs();\n\n  const updateStep = (index: number, updates: Partial<RecipeStep>) => {\n    const newSteps = [...localSteps];\n    newSteps[index] = { ...newSteps[index], ...updates };\n    setLocalSteps(newSteps);\n  };\n\n  const addStep = () => {\n    const newStep: RecipeStep = {\n      ...DEFAULT_STEP,\n      step_order: localSteps.length + 1,\n      step_name: `Step ${localSteps.length + 1}`,\n    } as RecipeStep;\n    setLocalSteps([...localSteps, newStep]);\n    setExpandedSteps(new Set([...expandedSteps, localSteps.length]));\n  };\n\n  const removeStep = (index: number) => {\n    if (localSteps.length <= 1) {\n      setError('Recipe must have at least one step');\n      return;\n    }\n    const newSteps = localSteps.filter((_, i) => i !== index);\n    // Renumber steps\n    newSteps.forEach((step, i) => {\n      step.step_order = i + 1;\n    });\n    setLocalSteps(newSteps);\n  };\n\n  const moveStep = (index: number, direction: 'up' | 'down') => {\n    const newIndex = direction === 'up' ? index - 1 : index + 1;\n    if (newIndex < 0 || newIndex >= localSteps.length) return;\n\n    const newSteps = [...localSteps];\n    [newSteps[index], newSteps[newIndex]] = [newSteps[newIndex], newSteps[index]];\n    // Renumber steps\n    newSteps.forEach((step, i) => {\n      step.step_order = i + 1;\n    });\n    setLocalSteps(newSteps);\n  };\n\n  const toggleStepExpanded = (index: number) => {\n    const newExpanded = new Set(expandedSteps);\n    if (newExpanded.has(index)) {\n      newExpanded.delete(index);\n    } else {\n      newExpanded.add(index);\n    }\n    setExpandedSteps(newExpanded);\n  };\n\n  const handleStartExecution = async () => {\n    if (!recipe) return;\n\n    // Check for missing required inputs based on their type\n    const missingInputs = requiredInputs.filter((input) => {\n      const value = inputValues[input];\n      const config = inputConfigs[input];\n\n      if (!config || config.type === 'text' || config.type === 'textarea') {\n        return !value || (typeof value === 'string' && !value.trim());\n      } else if (config.type === 'image' || config.type === 'file') {\n        return !value;\n      } else if (config.type === 'url_list') {\n        return !Array.isArray(value) || value.filter((u: string) => u.trim()).length === 0;\n      }\n      return !value;\n    });\n\n    if (missingInputs.length > 0) {\n      setError(`${t('fillRequiredFields')}: ${missingInputs.map(i => inputConfigs[i]?.label || formatLabel(i)).join(', ')}`);\n      return;\n    }\n\n    // Prepare input data - convert complex types to strings for prompt injection\n    const processedInputs: Record<string, string> = {};\n    for (const [key, value] of Object.entries(inputValues)) {\n      const config = inputConfigs[key];\n\n      if (config?.type === 'image' && value?.base64) {\n        // For images, include the base64 data (will be used by vision models)\n        processedInputs[key] = value.base64;\n        processedInputs[`${key}_description`] = `[Image: ${value.name}]`;\n      } else if (config?.type === 'file' && value?.content) {\n        // For files, include the content\n        processedInputs[key] = value.content;\n      } else if (config?.type === 'url_list' && Array.isArray(value)) {\n        // For URL lists, join them\n        processedInputs[key] = value.filter((u: string) => u.trim()).join('\\n');\n      } else if (typeof value === 'string') {\n        processedInputs[key] = value;\n      } else {\n        processedInputs[key] = String(value || '');\n      }\n    }\n\n    // Check that all AI steps have prompts (scraping steps don't need prompts)\n    const emptyPromptSteps = localSteps.filter(s =>\n      s.step_type !== 'scraping' && (!s.prompt_template || !s.prompt_template.trim())\n    );\n    if (emptyPromptSteps.length > 0) {\n      setError('All AI steps must have a prompt template');\n      return;\n    }\n\n    setIsStarting(true);\n    setError(null);\n    try {\n      // Pass modified steps to the execution with processed inputs\n      const result = await api.startExecution(recipe.id, processedInputs, localSteps);\n      navigate(`/executions/${result.executionId}`);\n    } catch (err: any) {\n      setError(err.message);\n      setIsStarting(false);\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600\"></div>\n      </div>\n    );\n  }\n\n  if (!recipe) {\n    return (\n      <div className=\"text-center py-12\">\n        <p className=\"text-secondary-600\">{t('recipeNotFound')}</p>\n        <Button onClick={() => navigate('/')} className=\"mt-4\">\n          {t('goToDashboard')}\n        </Button>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <div className=\"flex items-center space-x-2\">\n            <h1 className=\"text-2xl font-bold text-secondary-900\">\n              <TranslatedText text={recipe.name} />\n            </h1>\n            {recipe.is_template && (\n              <span className=\"px-2 py-0.5 text-xs font-medium bg-primary-100 text-primary-700 rounded\">\n                {t('template')}\n              </span>\n            )}\n          </div>\n          {recipe.description && (\n            <p className=\"text-secondary-600 mt-1\">\n              <TranslatedText text={recipe.description} />\n            </p>\n          )}\n        </div>\n        <div className=\"flex items-center space-x-3\">\n          <Button variant=\"ghost\" onClick={() => navigate('/')}>\n            {t('cancel')}\n          </Button>\n          <Button onClick={handleStartExecution} isLoading={isStarting}>\n            {t('startWorkflow')}\n          </Button>\n        </div>\n      </div>\n\n      {error && (\n        <div className=\"bg-red-50 text-red-700 px-4 py-3 rounded-lg\">\n          {error}\n        </div>\n      )}\n\n      {/* Input Values */}\n      {requiredInputs.length > 0 && (\n        <Card>\n          <CardHeader>\n            <h2 className=\"font-semibold text-secondary-900\">{t('inputValues')}</h2>\n            <p className=\"text-sm text-secondary-500 mt-1\">\n              {t('provideInputs')}\n            </p>\n          </CardHeader>\n          <CardBody className=\"space-y-4\">\n            {requiredInputs.map((input) => {\n              const config = inputConfigs[input] || {\n                type: 'text' as const,\n                label: formatLabel(input),\n                placeholder: `Enter ${formatLabel(input).toLowerCase()}...`,\n              };\n\n              // Ensure label defaults to formatted input name\n              if (!config.label) {\n                config.label = formatLabel(input);\n              }\n\n              return (\n                <DynamicInput\n                  key={input}\n                  name={input}\n                  config={config}\n                  value={inputValues[input]}\n                  onChange={(value) =>\n                    setInputValues({ ...inputValues, [input]: value })\n                  }\n                  t={t}\n                />\n              );\n            })}\n          </CardBody>\n        </Card>\n      )}\n\n      {/* Workflow Steps */}\n      <div>\n        <div className=\"flex items-center justify-between mb-4\">\n          <div>\n            <h2 className=\"text-lg font-semibold text-secondary-900\">{t('workflowSteps')}</h2>\n            <p className=\"text-sm text-secondary-500\">\n              {t('customizePrompts')}\n            </p>\n          </div>\n          <div className=\"flex items-center space-x-2\">\n            <button\n              onClick={() => setShowVariableHelp(true)}\n              className=\"text-sm text-primary-600 hover:text-primary-700\"\n            >\n              {t('variableHelp')}\n            </button>\n            <Button size=\"sm\" onClick={addStep}>\n              {t('addStep')}\n            </Button>\n          </div>\n        </div>\n\n        <div className=\"space-y-4\">\n          {localSteps.map((step, index) => (\n            <Card key={index}>\n              <div\n                className=\"px-6 py-4 flex items-center justify-between cursor-pointer hover:bg-secondary-50\"\n                onClick={() => toggleStepExpanded(index)}\n              >\n                <div className=\"flex items-center space-x-4\">\n                  <div className={`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center font-semibold ${\n                    step.step_type === 'scraping'\n                      ? 'bg-blue-100 text-blue-700'\n                      : 'bg-primary-100 text-primary-700'\n                  }`}>\n                    {step.step_type === 'scraping' ? 'üîç' : index + 1}\n                  </div>\n                  <div>\n                    <h4 className=\"font-medium text-secondary-900\">\n                      <TranslatedText text={step.step_name} />\n                    </h4>\n                    <p className=\"text-sm text-secondary-500\">\n                      {step.step_type === 'scraping'\n                        ? 'BrightData Scraping'\n                        : models.find(m => m.id === step.ai_model)?.name || step.ai_model}\n                    </p>\n                  </div>\n                </div>\n                <div className=\"flex items-center space-x-2\">\n                  <button\n                    onClick={(e) => { e.stopPropagation(); moveStep(index, 'up'); }}\n                    disabled={index === 0}\n                    className=\"p-1 text-secondary-400 hover:text-secondary-600 disabled:opacity-30\"\n                  >\n                    <ChevronUpIcon className=\"w-4 h-4\" />\n                  </button>\n                  <button\n                    onClick={(e) => { e.stopPropagation(); moveStep(index, 'down'); }}\n                    disabled={index === localSteps.length - 1}\n                    className=\"p-1 text-secondary-400 hover:text-secondary-600 disabled:opacity-30\"\n                  >\n                    <ChevronDownIcon className=\"w-4 h-4\" />\n                  </button>\n                  <button\n                    onClick={(e) => { e.stopPropagation(); removeStep(index); }}\n                    className=\"p-1 text-red-400 hover:text-red-600\"\n                  >\n                    <TrashIcon className=\"w-4 h-4\" />\n                  </button>\n                  <ChevronIcon\n                    className={`w-5 h-5 text-secondary-400 transition-transform ${\n                      expandedSteps.has(index) ? 'transform rotate-180' : ''\n                    }`}\n                  />\n                </div>\n              </div>\n\n              {expandedSteps.has(index) && (\n                <CardBody className=\"border-t border-secondary-100 space-y-4\">\n                  <Input\n                    label={t('stepName')}\n                    value={step.step_name}\n                    onChange={(e) => updateStep(index, { step_name: e.target.value })}\n                    placeholder={t('stepNamePlaceholder')}\n                  />\n\n                  {/* Scraping Step UI */}\n                  {step.step_type === 'scraping' ? (\n                    <div className=\"space-y-4\">\n                      <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n                        <div className=\"flex items-center space-x-2 mb-2\">\n                          <span className=\"text-2xl\">üîç</span>\n                          <h4 className=\"font-medium text-blue-800\">Scraping Step</h4>\n                        </div>\n                        <p className=\"text-sm text-blue-700\">\n                          This step extracts product reviews from e-commerce URLs using the BrightData API.\n                          You can also upload CSV files with review data.\n                        </p>\n                        {step.api_config && (() => {\n                          try {\n                            const apiConfig = JSON.parse(step.api_config);\n                            return (\n                              <div className=\"mt-3 text-sm\">\n                                <span className=\"text-blue-600 font-medium\">Service:</span>\n                                <span className=\"ml-2 text-blue-800\">{apiConfig.service}</span>\n                                <span className=\"ml-4 text-blue-600 font-medium\">Endpoint:</span>\n                                <span className=\"ml-2 text-blue-800\">{apiConfig.endpoint}</span>\n                              </div>\n                            );\n                          } catch {\n                            return null;\n                          }\n                        })()}\n                      </div>\n                      <div className=\"bg-secondary-50 rounded-lg p-4\">\n                        <h5 className=\"text-sm font-medium text-secondary-700 mb-2\">Supported Platforms</h5>\n                        <div className=\"flex space-x-2\">\n                          <span className=\"px-2 py-1 bg-orange-100 text-orange-800 text-xs rounded border border-orange-200\">\n                            üì¶ Amazon\n                          </span>\n                          <span className=\"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded border border-blue-200\">\n                            üõí Walmart\n                          </span>\n                          <span className=\"px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded border border-purple-200\">\n                            üè† Wayfair\n                          </span>\n                        </div>\n                      </div>\n                    </div>\n                  ) : (\n                    /* AI Step UI */\n                    <>\n                      <Select\n                        label={t('aiModel')}\n                        value={step.ai_model}\n                        onChange={(e) => updateStep(index, { ai_model: e.target.value })}\n                        options={models.map(m => ({\n                          value: m.id,\n                          label: `${m.name}${m.available ? '' : ` (${t('notConfigured')})`}`,\n                        }))}\n                      />\n\n                      <div>\n                        <label className=\"block text-sm font-medium text-secondary-700 mb-1\">\n                          {t('promptTemplate')}\n                        </label>\n                        <TextArea\n                          value={step.prompt_template}\n                          onChange={(e) => updateStep(index, { prompt_template: e.target.value })}\n                          placeholder={t('promptTemplatePlaceholder')}\n                          rows={8}\n                          className=\"font-mono text-sm\"\n                        />\n                        <p className=\"mt-1 text-sm text-secondary-500\">\n                          {t('promptTemplateHelp')}\n                        </p>\n                      </div>\n\n                      <Select\n                        label={t('outputFormat')}\n                        value={step.output_format}\n                        onChange={(e) => updateStep(index, { output_format: e.target.value as any })}\n                        options={[\n                          { value: 'text', label: t('plainText') },\n                          { value: 'markdown', label: t('markdown') },\n                          { value: 'json', label: t('json') },\n                        ]}\n                      />\n\n                      {/* Model Config */}\n                      <div className=\"border-t border-secondary-200 pt-4\">\n                        <h3 className=\"text-sm font-medium text-secondary-700 mb-3\">{t('modelSettings')}</h3>\n                        <div className=\"grid grid-cols-2 gap-4\">\n                          <Input\n                            label={t('temperature')}\n                            type=\"number\"\n                            min=\"0\"\n                            max=\"2\"\n                            step=\"0.1\"\n                            value={JSON.parse(step.model_config || '{}').temperature || 0.7}\n                            onChange={(e) => {\n                              const config = JSON.parse(step.model_config || '{}');\n                              config.temperature = parseFloat(e.target.value);\n                              updateStep(index, { model_config: JSON.stringify(config) });\n                            }}\n                          />\n                          <Input\n                            label={t('maxTokens')}\n                            type=\"number\"\n                            min=\"100\"\n                            max=\"100000\"\n                            step=\"100\"\n                            value={JSON.parse(step.model_config || '{}').maxTokens || 2000}\n                            onChange={(e) => {\n                              const config = JSON.parse(step.model_config || '{}');\n                              config.maxTokens = parseInt(e.target.value);\n                              updateStep(index, { model_config: JSON.stringify(config) });\n                            }}\n                          />\n                        </div>\n                      </div>\n                    </>\n                  )}\n                </CardBody>\n              )}\n            </Card>\n          ))}\n        </div>\n      </div>\n\n      {/* Bottom Actions */}\n      <div className=\"flex items-center justify-between pt-4 border-t border-secondary-200\">\n        <Button variant=\"ghost\" onClick={() => navigate('/')}>\n          {t('cancel')}\n        </Button>\n        <Button onClick={handleStartExecution} isLoading={isStarting} size=\"lg\">\n          {t('startWorkflow')}\n        </Button>\n      </div>\n\n      {/* Variable Help Modal */}\n      <Modal\n        isOpen={showVariableHelp}\n        onClose={() => setShowVariableHelp(false)}\n        title={t('variableReference')}\n        size=\"lg\"\n      >\n        <div className=\"space-y-4\">\n          <div>\n            <h3 className=\"font-semibold text-secondary-900\">{t('userInputVariables')}</h3>\n            <p className=\"text-sm text-secondary-600 mt-1\">\n              <code className=\"bg-secondary-100 px-1 rounded\">{'{{variable_name}}'}</code> {t('userInputVariablesDesc')}\n            </p>\n            <div className=\"mt-2 bg-secondary-50 p-3 rounded text-sm font-mono\">\n              {'{{product_name}}'}<br/>\n              {'{{target_audience}}'}<br/>\n              {'{{additional_context}}'}\n            </div>\n          </div>\n          <div>\n            <h3 className=\"font-semibold text-secondary-900\">{t('previousStepOutputs')}</h3>\n            <p className=\"text-sm text-secondary-600 mt-1\">\n              {t('previousStepOutputsDesc')} <code className=\"bg-secondary-100 px-1 rounded\">{'{{step_N_output}}'}</code>\n            </p>\n            <div className=\"mt-2 bg-secondary-50 p-3 rounded text-sm font-mono\">\n              {'{{step_1_output}}'}<br/>\n              {'{{step_2_output}}'}\n            </div>\n          </div>\n          <div>\n            <h3 className=\"font-semibold text-secondary-900\">{t('companyStandards')}</h3>\n            <p className=\"text-sm text-secondary-600 mt-1\">\n              {t('companyStandardsDesc')}\n            </p>\n            <div className=\"mt-2 bg-secondary-50 p-3 rounded text-sm font-mono\">\n              {'{{brand_voice}}'}<br/>\n              {'{{amazon_requirements}}'}<br/>\n              {'{{image_style_guidelines}}'}\n            </div>\n          </div>\n        </div>\n      </Modal>\n    </div>\n  );\n}\n\nfunction formatLabel(varName: string): string {\n  return varName\n    .replace(/_/g, ' ')\n    .replace(/\\b\\w/g, (c) => c.toUpperCase());\n}\n\n// Icons\nfunction ChevronUpIcon({ className }: { className?: string }) {\n  return (\n    <svg className={className} fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 15l7-7 7 7\" />\n    </svg>\n  );\n}\n\nfunction ChevronDownIcon({ className }: { className?: string }) {\n  return (\n    <svg className={className} fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n    </svg>\n  );\n}\n\nfunction ChevronIcon({ className }: { className?: string }) {\n  return (\n    <svg className={className} fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n    </svg>\n  );\n}\n\nfunction TrashIcon({ className }: { className?: string }) {\n  return (\n    <svg className={className} fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n    </svg>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}